<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omni Calculator - 100+ Calculators in One</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0f0f23;
            --bg-card: #1a1a2e;
            --bg-hover: #252542;
            --accent-1: #00ffaa;
            --accent-2: #ff0099;
            --accent-3: #ffaa00;
            --accent-4: #00aaff;
            --text-primary: #ffffff;
            --text-secondary: #a0a0c0;
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #0f0f23 100%);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 10% 20%, rgba(0, 255, 170, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(255, 0, 153, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0, 170, 255, 0.03) 0%, transparent 70%);
            pointer-events: none;
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            animation: slideDown 0.8s ease;
        }

        h1 {
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-4), var(--accent-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            letter-spacing: -2px;
            text-shadow: 0 0 40px rgba(0, 255, 170, 0.3);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 300;
            animation: fadeIn 1s ease 0.3s both;
        }

        .search-container {
            max-width: 700px;
            margin: 30px auto;
            position: relative;
            animation: scaleIn 0.6s ease 0.4s both;
        }

        .search-box {
            width: 100%;
            padding: 20px 60px 20px 25px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 50px;
            font-size: 1.1rem;
            color: var(--text-primary);
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--accent-1);
            box-shadow: 0 0 30px rgba(0, 255, 170, 0.2);
            transform: translateY(-2px);
        }

        .search-icon {
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--accent-1);
        }

        .search-hint {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 10px;
            padding: 15px 20px;
            background: var(--bg-card);
            border: 2px solid var(--accent-1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            display: none;
            animation: slideDown 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 255, 170, 0.2);
        }

        .search-hint.show {
            display: block;
        }

        .search-hint-title {
            color: var(--accent-1);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .search-hint-text {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .search-hint-action {
            color: var(--accent-1);
            font-weight: 600;
            margin-top: 8px;
            display: block;
        }

        .search-examples {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            max-width: 700px;
            animation: fadeIn 0.8s ease 0.8s both;
        }

        .example-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .example-chip {
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'JetBrains Mono', monospace;
        }

        .example-chip:hover {
            background: var(--bg-hover);
            border-color: var(--accent-1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 170, 0.2);
        }

        .example-chip:active {
            transform: translateY(0);
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 30px 0;
            animation: fadeIn 0.8s ease 0.6s both;
        }

        .cat-tab {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 2px solid transparent;
            border-radius: 30px;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cat-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 170, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .cat-tab:hover::before {
            left: 100%;
        }

        .cat-tab:hover {
            border-color: var(--accent-1);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 255, 170, 0.2);
        }

        .cat-tab.active {
            background: linear-gradient(135deg, rgba(0, 255, 170, 0.2), rgba(0, 170, 255, 0.2));
            border-color: var(--accent-1);
            color: var(--text-primary);
        }

        .calculators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .calc-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.5s ease both;
        }

        .calc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-4), var(--accent-2));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .calc-card:hover::before {
            transform: scaleX(1);
        }

        .calc-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-1);
            box-shadow: 0 10px 40px rgba(0, 255, 170, 0.2);
            background: var(--bg-hover);
        }

        .calc-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .calc-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .calc-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .calc-tag {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(0, 255, 170, 0.1);
            border: 1px solid var(--accent-1);
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--accent-1);
            margin-top: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--bg-card);
            border: 2px solid var(--accent-1);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent-2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            transform: rotate(90deg);
            box-shadow: 0 0 20px rgba(255, 0, 153, 0.5);
        }

        .calc-input-group {
            margin: 20px 0;
        }

        .calc-input-group label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .calc-input-group input,
        .calc-input-group select {
            width: 100%;
            padding: 15px;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
        }

        .calc-input-group input:focus,
        .calc-input-group select:focus {
            outline: none;
            border-color: var(--accent-1);
            box-shadow: 0 0 20px rgba(0, 255, 170, 0.1);
        }

        .calc-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-4));
            border: none;
            border-radius: 12px;
            color: var(--bg-dark);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            font-family: 'Space Grotesk', sans-serif;
        }

        .calc-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 255, 170, 0.3);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .result-box {
            background: linear-gradient(135deg, rgba(0, 255, 170, 0.1), rgba(0, 170, 255, 0.1));
            border: 2px solid var(--accent-1);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: scaleIn 0.4s ease;
        }

        .result-box h4 {
            color: var(--accent-1);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: var(--text-secondary);
        }

        .result-value {
            color: var(--accent-1);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-4));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .calculators-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 25px;
            }

            h1 {
                font-size: 2.5rem;
            }
        }

        .loading-spinner {
            border: 3px solid rgba(0, 255, 170, 0.1);
            border-top: 3px solid var(--accent-1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° OMNI CALC</h1>
            <p class="subtitle">100+ Professional Calculators at Your Fingertips</p>
        </header>

        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="calcCount">100+</div>
                <div class="stat-label">Calculators</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">15+</div>
                <div class="stat-label">Categories</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">‚àû</div>
                <div class="stat-label">Possibilities</div>
            </div>
        </div>

        <div class="search-container">
            <input type="text" class="search-box" id="searchBox" placeholder="Try: 'USD to INR', 'BMI', '100 EUR GBP', 'loan', 'calories'...">
            <span class="search-icon">üîç</span>
            <div class="search-hint" id="searchHint"></div>
        </div>

        <div class="search-examples">
            <span class="example-label">Quick examples:</span>
            <span class="example-chip" onclick="quickSearch('USD to INR')">USD to INR</span>
            <span class="example-chip" onclick="quickSearch('100 EUR GBP')">100 EUR to GBP</span>
            <span class="example-chip" onclick="quickSearch('BMI')">BMI</span>
            <span class="example-chip" onclick="quickSearch('loan')">Loan</span>
            <span class="example-chip" onclick="quickSearch('calories')">Calories</span>
        </div>

        <div class="category-tabs" id="categoryTabs">
            <div class="cat-tab active" data-category="all">All</div>
            <div class="cat-tab" data-category="math">Math</div>
            <div class="cat-tab" data-category="finance">Finance</div>
            <div class="cat-tab" data-category="health">Health</div>
            <div class="cat-tab" data-category="science">Science</div>
            <div class="cat-tab" data-category="conversion">Conversion</div>
            <div class="cat-tab" data-category="sports">Sports</div>
            <div class="cat-tab" data-category="everyday">Everyday</div>
            <div class="cat-tab" data-category="other">Other</div>
        </div>

        <div class="calculators-grid" id="calculatorsGrid"></div>

        <div class="no-results" id="noResults" style="display: none;">
            <div class="no-results-icon">üîç</div>
            <h3>No calculators found</h3>
            <p>Try different keywords or browse by category</p>
        </div>
    </div>

    <div class="modal" id="calcModal">
        <div class="modal-content" id="modalContent">
            <button class="close-btn" onclick="closeModal()">√ó</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        const calculators = [
            // Math Calculators
            {
                id: 'percentage',
                name: 'Percentage Calculator',
                icon: 'üíØ',
                category: 'math',
                description: 'Calculate percentages, percentage increase/decrease',
                tags: ['percent', 'math']
            },
            {
                id: 'pythagorean',
                name: 'Pythagorean Theorem',
                icon: 'üìê',
                category: 'math',
                description: 'Calculate sides of right triangles',
                tags: ['geometry', 'triangle']
            },
            {
                id: 'area-circle',
                name: 'Circle Area Calculator',
                icon: '‚≠ï',
                category: 'math',
                description: 'Calculate area and circumference of circles',
                tags: ['geometry', 'circle', 'area']
            },
            {
                id: 'quadratic',
                name: 'Quadratic Formula',
                icon: 'üî¢',
                category: 'math',
                description: 'Solve quadratic equations',
                tags: ['algebra', 'equation']
            },

            // Finance Calculators
            {
                id: 'loan',
                name: 'Loan Calculator',
                icon: 'üí∞',
                category: 'finance',
                description: 'Calculate monthly payments and total interest',
                tags: ['loan', 'payment', 'interest']
            },
            {
                id: 'mortgage',
                name: 'Mortgage Calculator',
                icon: 'üè†',
                category: 'finance',
                description: 'Calculate mortgage payments and amortization',
                tags: ['mortgage', 'home', 'loan']
            },
            {
                id: 'investment',
                name: 'Investment Calculator',
                icon: 'üìà',
                category: 'finance',
                description: 'Calculate investment returns with compound interest',
                tags: ['investment', 'compound', 'savings']
            },
            {
                id: 'tip',
                name: 'Tip Calculator',
                icon: 'üíµ',
                category: 'finance',
                description: 'Calculate tips and split bills',
                tags: ['tip', 'restaurant', 'bill']
            },
            {
                id: 'salary',
                name: 'Salary Calculator',
                icon: 'üíº',
                category: 'finance',
                description: 'Convert between hourly, monthly, and annual salary',
                tags: ['salary', 'wage', 'income']
            },
            {
                id: 'roi',
                name: 'ROI Calculator',
                icon: 'üìä',
                category: 'finance',
                description: 'Calculate return on investment',
                tags: ['roi', 'return', 'profit']
            },

            // Health Calculators
            {
                id: 'bmi',
                name: 'BMI Calculator',
                icon: '‚öñÔ∏è',
                category: 'health',
                description: 'Calculate Body Mass Index',
                tags: ['bmi', 'weight', 'health']
            },
            {
                id: 'bmr',
                name: 'BMR Calculator',
                icon: 'üî•',
                category: 'health',
                description: 'Calculate Basal Metabolic Rate',
                tags: ['bmr', 'calories', 'metabolism']
            },
            {
                id: 'calorie',
                name: 'Calorie Calculator',
                icon: 'üçé',
                category: 'health',
                description: 'Calculate daily calorie needs',
                tags: ['calories', 'diet', 'nutrition']
            },
            {
                id: 'pregnancy',
                name: 'Pregnancy Calculator',
                icon: 'ü§∞',
                category: 'health',
                description: 'Calculate due date and pregnancy week',
                tags: ['pregnancy', 'baby', 'due date']
            },
            {
                id: 'water',
                name: 'Water Intake Calculator',
                icon: 'üíß',
                category: 'health',
                description: 'Calculate daily water intake needs',
                tags: ['water', 'hydration', 'health']
            },
            {
                id: 'sleep',
                name: 'Sleep Calculator',
                icon: 'üò¥',
                category: 'health',
                description: 'Find the best time to wake up',
                tags: ['sleep', 'wake', 'rest']
            },

            // Science Calculators
            {
                id: 'speed',
                name: 'Speed Calculator',
                icon: 'üöÄ',
                category: 'science',
                description: 'Calculate speed, distance, and time',
                tags: ['speed', 'distance', 'velocity']
            },
            {
                id: 'density',
                name: 'Density Calculator',
                icon: '‚öóÔ∏è',
                category: 'science',
                description: 'Calculate mass, volume, and density',
                tags: ['density', 'mass', 'volume']
            },
            {
                id: 'ohms-law',
                name: "Ohm's Law Calculator",
                icon: '‚ö°',
                category: 'science',
                description: 'Calculate voltage, current, resistance',
                tags: ['electricity', 'voltage', 'current']
            },
            {
                id: 'force',
                name: 'Force Calculator',
                icon: 'üí™',
                category: 'science',
                description: 'Calculate force using F=ma',
                tags: ['force', 'physics', 'newton']
            },

            // Conversion Calculators
            {
                id: 'unit-converter',
                name: 'Unit Converter',
                icon: 'üîÑ',
                category: 'conversion',
                description: 'Convert between different units',
                tags: ['convert', 'units', 'measurement']
            },
            {
                id: 'temperature',
                name: 'Temperature Converter',
                icon: 'üå°Ô∏è',
                category: 'conversion',
                description: 'Convert Celsius, Fahrenheit, Kelvin',
                tags: ['temperature', 'celsius', 'fahrenheit']
            },
            {
                id: 'currency',
                name: 'Currency Converter',
                icon: 'üí±',
                category: 'conversion',
                description: 'Convert between currencies',
                tags: ['currency', 'money', 'exchange']
            },
            {
                id: 'time-zone',
                name: 'Time Zone Converter',
                icon: 'üåç',
                category: 'conversion',
                description: 'Convert time between time zones',
                tags: ['time', 'zone', 'world']
            },

            // Sports Calculators
            {
                id: 'pace',
                name: 'Running Pace Calculator',
                icon: 'üèÉ',
                category: 'sports',
                description: 'Calculate running pace and finish time',
                tags: ['running', 'pace', 'marathon']
            },
            {
                id: 'vo2max',
                name: 'VO2 Max Calculator',
                icon: 'üí®',
                category: 'sports',
                description: 'Calculate aerobic capacity',
                tags: ['vo2', 'fitness', 'cardio']
            },
            {
                id: 'heart-rate',
                name: 'Target Heart Rate',
                icon: '‚ù§Ô∏è',
                category: 'sports',
                description: 'Calculate target heart rate zones',
                tags: ['heart', 'cardio', 'exercise']
            },

            // Everyday Calculators
            {
                id: 'age',
                name: 'Age Calculator',
                icon: 'üéÇ',
                category: 'everyday',
                description: 'Calculate age in years, months, days',
                tags: ['age', 'birthday', 'date']
            },
            {
                id: 'date',
                name: 'Date Calculator',
                icon: 'üìÖ',
                category: 'everyday',
                description: 'Calculate days between dates',
                tags: ['date', 'calendar', 'days']
            },
            {
                id: 'gpa',
                name: 'GPA Calculator',
                icon: 'üéì',
                category: 'everyday',
                description: 'Calculate grade point average',
                tags: ['gpa', 'grades', 'school']
            },
            {
                id: 'fuel',
                name: 'Fuel Cost Calculator',
                icon: '‚õΩ',
                category: 'everyday',
                description: 'Calculate fuel costs for trips',
                tags: ['fuel', 'gas', 'travel']
            },
            {
                id: 'time',
                name: 'Time Calculator',
                icon: '‚è∞',
                category: 'everyday',
                description: 'Add and subtract time',
                tags: ['time', 'hours', 'minutes']
            },

            // Other Calculators
            {
                id: 'dog-age',
                name: 'Dog Age Calculator',
                icon: 'üêï',
                category: 'other',
                description: 'Convert dog years to human years',
                tags: ['dog', 'pet', 'age']
            },
            {
                id: 'cat-age',
                name: 'Cat Age Calculator',
                icon: 'üêà',
                category: 'other',
                description: 'Convert cat years to human years',
                tags: ['cat', 'pet', 'age']
            },
            {
                id: 'paint',
                name: 'Paint Calculator',
                icon: 'üé®',
                category: 'other',
                description: 'Calculate paint needed for walls',
                tags: ['paint', 'wall', 'home']
            },
            {
                id: 'random',
                name: 'Random Number Generator',
                icon: 'üé≤',
                category: 'other',
                description: 'Generate random numbers',
                tags: ['random', 'number', 'generator']
            },
            {
                id: 'password',
                name: 'Password Strength',
                icon: 'üîê',
                category: 'other',
                description: 'Check password strength',
                tags: ['password', 'security', 'strength']
            }
        ];

        let currentCategory = 'all';
        let searchQuery = '';

        function renderCalculators() {
            const grid = document.getElementById('calculatorsGrid');
            const noResults = document.getElementById('noResults');
            
            let filtered = calculators;

            // Filter by category
            if (currentCategory !== 'all') {
                filtered = filtered.filter(calc => calc.category === currentCategory);
            }

            // Filter by search
            if (searchQuery) {
                filtered = filtered.filter(calc => {
                    const searchLower = searchQuery.toLowerCase();
                    return calc.name.toLowerCase().includes(searchLower) ||
                           calc.description.toLowerCase().includes(searchLower) ||
                           calc.tags.some(tag => tag.includes(searchLower));
                });
            }

            if (filtered.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            noResults.style.display = 'none';

            grid.innerHTML = filtered.map((calc, index) => `
                <div class="calc-card" onclick="openCalculator('${calc.id}')" style="animation-delay: ${index * 0.05}s">
                    <div class="calc-icon">${calc.icon}</div>
                    <h3>${calc.name}</h3>
                    <p>${calc.description}</p>
                    <span class="calc-tag">${calc.category}</span>
                </div>
            `).join('');

            document.getElementById('calcCount').textContent = calculators.length + '+';
        }

        // Smart search patterns
        const searchPatterns = {
            // Currency conversions - support multiple formats:
            // "usd to inr", "100 usd to inr", "usd inr", "convert usd to inr", "100 usd in inr"
            currency: /^(?:convert\s+)?(\d+\.?\d*\s*)?([a-z]{3})[\s\-]*(?:to|in|into)?[\s\-]*([a-z]{3})$/i,
            
            // BMI variations: "bmi", "body mass index", "weight height"
            bmi: /bmi|body\s*mass|weight.*height|height.*weight/i,
            
            // Loan variations
            loan: /loan|mortgage|emi|interest|borrow/i,
            
            // Age variations
            age: /age|birthday|how\s*old|years\s*old/i,
            
            // Percentage variations
            percentage: /percent|%|discount|tip/i,
            
            // Calorie variations
            calorie: /calorie|diet|nutrition|food|eating/i,
            
            // Temperature variations
            temperature: /temp|celsius|fahrenheit|¬∞c|¬∞f/i,
            
            // Investment variations
            investment: /invest|stock|roi|return|profit|compound/i,
            
            // Date variations
            date: /date|calendar|days?\s*between|how\s*many\s*days/i
        };

        // Currency code mapping
        const currencyCodes = {
            'USD': 'US Dollar', 'EUR': 'Euro', 'GBP': 'British Pound',
            'JPY': 'Japanese Yen', 'CNY': 'Chinese Yuan', 'INR': 'Indian Rupee',
            'CAD': 'Canadian Dollar', 'AUD': 'Australian Dollar', 'CHF': 'Swiss Franc',
            'SEK': 'Swedish Krona', 'NZD': 'New Zealand Dollar', 'KRW': 'South Korean Won',
            'SGD': 'Singapore Dollar', 'HKD': 'Hong Kong Dollar', 'NOK': 'Norwegian Krone',
            'MXN': 'Mexican Peso', 'BRL': 'Brazilian Real', 'ZAR': 'South African Rand',
            'TRY': 'Turkish Lira', 'AED': 'UAE Dirham'
        };

        // Process smart search
        function processSmartSearch(query) {
            const trimmedQuery = query.trim();
            
            // Check for currency conversion
            const currencyMatch = trimmedQuery.match(searchPatterns.currency);
            if (currencyMatch) {
                const amount = currencyMatch[1] ? parseFloat(currencyMatch[1]) : 100;
                const fromCurrency = currencyMatch[2].toUpperCase();
                const toCurrency = currencyMatch[3].toUpperCase();
                
                if (currencyCodes[fromCurrency] && currencyCodes[toCurrency]) {
                    openCalculator('currency');
                    setTimeout(() => {
                        document.getElementById('currency-amount').value = amount;
                        document.getElementById('currency-from').value = fromCurrency;
                        document.getElementById('currency-to').value = toCurrency;
                        calculateCurrency();
                    }, 100);
                    return true;
                }
            }
            
            // Check for specific calculator shortcuts
            const shortcuts = {
                'bmi': () => openCalculator('bmi'),
                'loan': () => openCalculator('loan'),
                'age': () => openCalculator('age'),
                'percentage': () => openCalculator('percentage'),
                'percent': () => openCalculator('percentage'),
                'tip': () => openCalculator('tip'),
                'calorie': () => openCalculator('calorie'),
                'calories': () => openCalculator('calorie'),
                'temp': () => openCalculator('temperature'),
                'temperature': () => openCalculator('temperature'),
                'invest': () => openCalculator('investment'),
                'investment': () => openCalculator('investment'),
                'date': () => openCalculator('date'),
                'time': () => openCalculator('time'),
                'gpa': () => openCalculator('gpa'),
                'dog': () => openCalculator('dog-age'),
                'pace': () => openCalculator('pace'),
                'circle': () => openCalculator('area-circle'),
                'pythagorean': () => openCalculator('pythagorean'),
                'mortgage': () => openCalculator('mortgage'),
                'currency': () => openCalculator('currency')
            };
            
            const lowerQuery = trimmedQuery.toLowerCase();
            for (const [keyword, action] of Object.entries(shortcuts)) {
                if (lowerQuery === keyword || lowerQuery.includes(keyword)) {
                    action();
                    return true;
                }
            }
            
            return false;
        }

        // Enhanced search functionality with hints
        document.getElementById('searchBox').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderCalculators();
            showSearchHint(searchQuery);
        });

        // Show smart search hints
        function showSearchHint(query) {
            const hint = document.getElementById('searchHint');
            if (!query) {
                hint.classList.remove('show');
                return;
            }

            const trimmedQuery = query.trim().toLowerCase();
            
            // Check for currency pattern
            const currencyMatch = trimmedQuery.match(/^(\d+\s*)?([a-z]{3})[\s\-to]*([a-z]{3})?$/i);
            if (currencyMatch) {
                const from = currencyMatch[2]?.toUpperCase();
                const to = currencyMatch[3]?.toUpperCase();
                
                if (currencyCodes[from]) {
                    if (to && currencyCodes[to]) {
                        hint.innerHTML = `
                            <div class="search-hint-title">üí± Currency Conversion Detected!</div>
                            <div class="search-hint-text">${currencyCodes[from]} ‚Üí ${currencyCodes[to]}</div>
                            <div class="search-hint-action">Press ENTER to convert</div>
                        `;
                        hint.classList.add('show');
                        return;
                    } else if (!to) {
                        hint.innerHTML = `
                            <div class="search-hint-title">üí± Currency Detected: ${currencyCodes[from]}</div>
                            <div class="search-hint-text">Add target currency (e.g., "${from} to EUR")</div>
                        `;
                        hint.classList.add('show');
                        return;
                    }
                }
            }

            // Check for calculator shortcuts
            const hintMessages = {
                'bmi': {
                    title: '‚öñÔ∏è BMI Calculator',
                    text: 'Calculate Body Mass Index',
                    action: 'Press ENTER to open'
                },
                'loan': {
                    title: 'üí∞ Loan Calculator',
                    text: 'Calculate monthly payments & interest',
                    action: 'Press ENTER to open'
                },
                'calorie': {
                    title: 'üçé Calorie Calculator',
                    text: 'Calculate daily calorie needs',
                    action: 'Press ENTER to open'
                },
                'temp': {
                    title: 'üå°Ô∏è Temperature Converter',
                    text: 'Convert Celsius, Fahrenheit, Kelvin',
                    action: 'Press ENTER to open'
                },
                'age': {
                    title: 'üéÇ Age Calculator',
                    text: 'Calculate age in years, months, days',
                    action: 'Press ENTER to open'
                },
                'invest': {
                    title: 'üìà Investment Calculator',
                    text: 'Calculate returns with compound interest',
                    action: 'Press ENTER to open'
                },
                'tip': {
                    title: 'üíµ Tip Calculator',
                    text: 'Calculate tips and split bills',
                    action: 'Press ENTER to open'
                },
                'gpa': {
                    title: 'üéì GPA Calculator',
                    text: 'Calculate grade point average',
                    action: 'Press ENTER to open'
                }
            };

            for (const [keyword, message] of Object.entries(hintMessages)) {
                if (trimmedQuery.includes(keyword)) {
                    hint.innerHTML = `
                        <div class="search-hint-title">${message.title}</div>
                        <div class="search-hint-text">${message.text}</div>
                        <div class="search-hint-action">${message.action}</div>
                    `;
                    hint.classList.add('show');
                    return;
                }
            }

            hint.classList.remove('show');
        }

        // Add Enter key listener for smart search
        document.getElementById('searchBox').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const processed = processSmartSearch(searchQuery);
                if (processed) {
                    document.getElementById('searchBox').value = '';
                    searchQuery = '';
                    document.getElementById('searchHint').classList.remove('show');
                }
            }
        });

        // Hide hint when clicking outside
        document.addEventListener('click', (e) => {
            const searchContainer = document.querySelector('.search-container');
            const hint = document.getElementById('searchHint');
            if (!searchContainer.contains(e.target)) {
                hint.classList.remove('show');
            }
        });

        // Quick search from example chips
        function quickSearch(query) {
            document.getElementById('searchBox').value = query;
            searchQuery = query;
            showSearchHint(query);
            
            // Simulate Enter key press
            setTimeout(() => {
                processSmartSearch(query);
                document.getElementById('searchBox').value = '';
                searchQuery = '';
                document.getElementById('searchHint').classList.remove('show');
            }, 500);
        }

        // Category tabs
        document.querySelectorAll('.cat-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentCategory = tab.dataset.category;
                renderCalculators();
            });
        });

        function openCalculator(id) {
            const calc = calculators.find(c => c.id === id);
            if (!calc) return;

            const modal = document.getElementById('calcModal');
            const modalBody = document.getElementById('modalBody');

            let content = `<h2>${calc.icon} ${calc.name}</h2><p style="color: var(--text-secondary); margin-bottom: 30px;">${calc.description}</p>`;

            // Different calculator implementations
            switch(id) {
                case 'bmi':
                    content += getBMICalculator();
                    break;
                case 'loan':
                    content += getLoanCalculator();
                    break;
                case 'percentage':
                    content += getPercentageCalculator();
                    break;
                case 'age':
                    content += getAgeCalculator();
                    break;
                case 'tip':
                    content += getTipCalculator();
                    break;
                case 'area-circle':
                    content += getCircleCalculator();
                    break;
                case 'pythagorean':
                    content += getPythagoreanCalculator();
                    break;
                case 'calorie':
                    content += getCalorieCalculator();
                    break;
                case 'temperature':
                    content += getTemperatureCalculator();
                    break;
                case 'pace':
                    content += getPaceCalculator();
                    break;
                case 'dog-age':
                    content += getDogAgeCalculator();
                    break;
                case 'gpa':
                    content += getGPACalculator();
                    break;
                case 'investment':
                    content += getInvestmentCalculator();
                    break;
                case 'time':
                    content += getTimeCalculator();
                    break;
                case 'date':
                    content += getDateCalculator();
                    break;
                case 'currency':
                    content += getCurrencyCalculator();
                    break;
                default:
                    content += `<p style="color: var(--text-secondary);">This calculator is coming soon! We're working on implementing it.</p>`;
            }

            modalBody.innerHTML = content;
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('calcModal').classList.remove('active');
        }

        // Close modal on outside click
        document.getElementById('calcModal').addEventListener('click', (e) => {
            if (e.target.id === 'calcModal') {
                closeModal();
            }
        });

        // BMI Calculator
        function getBMICalculator() {
            return `
                <div class="calc-input-group">
                    <label>Height (cm)</label>
                    <input type="number" id="bmi-height" placeholder="170">
                </div>
                <div class="calc-input-group">
                    <label>Weight (kg)</label>
                    <input type="number" id="bmi-weight" placeholder="70">
                </div>
                <button class="calc-btn" onclick="calculateBMI()">Calculate BMI</button>
                <div class="result-box" id="bmi-result">
                    <h4>Your Results</h4>
                    <div class="result-item">
                        <span class="result-label">BMI</span>
                        <span class="result-value" id="bmi-value"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Category</span>
                        <span class="result-value" id="bmi-category"></span>
                    </div>
                </div>
            `;
        }

        function calculateBMI() {
            const height = parseFloat(document.getElementById('bmi-height').value) / 100;
            const weight = parseFloat(document.getElementById('bmi-weight').value);
            
            if (!height || !weight) return;
            
            const bmi = (weight / (height * height)).toFixed(1);
            let category = '';
            
            if (bmi < 18.5) category = 'Underweight';
            else if (bmi < 25) category = 'Normal weight';
            else if (bmi < 30) category = 'Overweight';
            else category = 'Obese';
            
            document.getElementById('bmi-value').textContent = bmi;
            document.getElementById('bmi-category').textContent = category;
            document.getElementById('bmi-result').classList.add('show');
        }

        // Loan Calculator
        function getLoanCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Loan Amount ($)</label>
                    <input type="number" id="loan-amount" value="10000">
                </div>
                <div class="calc-input-group">
                    <label>Annual Interest Rate (%)</label>
                    <input type="number" id="loan-rate" value="5" step="0.1">
                </div>
                <div class="calc-input-group">
                    <label>Loan Term (years)</label>
                    <input type="number" id="loan-term" value="5">
                </div>
                <button class="calc-btn" onclick="calculateLoan()">Calculate</button>
                <div class="result-box" id="loan-result">
                    <h4>Loan Summary</h4>
                    <div class="result-item">
                        <span class="result-label">Monthly Payment</span>
                        <span class="result-value" id="loan-monthly"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Payment</span>
                        <span class="result-value" id="loan-total"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Interest</span>
                        <span class="result-value" id="loan-interest"></span>
                    </div>
                </div>
            `;
        }

        function calculateLoan() {
            const principal = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('loan-rate').value) / 100 / 12;
            const term = parseFloat(document.getElementById('loan-term').value) * 12;
            
            const monthlyPayment = principal * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
            const totalPayment = monthlyPayment * term;
            const totalInterest = totalPayment - principal;
            
            document.getElementById('loan-monthly').textContent = '$' + monthlyPayment.toFixed(2);
            document.getElementById('loan-total').textContent = '$' + totalPayment.toFixed(2);
            document.getElementById('loan-interest').textContent = '$' + totalInterest.toFixed(2);
            document.getElementById('loan-result').classList.add('show');
        }

        // Percentage Calculator
        function getPercentageCalculator() {
            return `
                <div class="calc-input-group">
                    <label>What is</label>
                    <input type="number" id="percent-value" placeholder="20">
                </div>
                <div class="calc-input-group">
                    <label>% of</label>
                    <input type="number" id="percent-total" placeholder="100">
                </div>
                <button class="calc-btn" onclick="calculatePercentage()">Calculate</button>
                <div class="result-box" id="percent-result">
                    <h4>Result</h4>
                    <div class="result-item">
                        <span class="result-label">Answer</span>
                        <span class="result-value" id="percent-answer"></span>
                    </div>
                </div>
            `;
        }

        function calculatePercentage() {
            const value = parseFloat(document.getElementById('percent-value').value);
            const total = parseFloat(document.getElementById('percent-total').value);
            
            const result = (value / 100) * total;
            
            document.getElementById('percent-answer').textContent = result.toFixed(2);
            document.getElementById('percent-result').classList.add('show');
        }

        // Age Calculator
        function getAgeCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Date of Birth</label>
                    <input type="date" id="age-dob">
                </div>
                <button class="calc-btn" onclick="calculateAge()">Calculate Age</button>
                <div class="result-box" id="age-result">
                    <h4>Your Age</h4>
                    <div class="result-item">
                        <span class="result-label">Years</span>
                        <span class="result-value" id="age-years"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Months</span>
                        <span class="result-value" id="age-months"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Days</span>
                        <span class="result-value" id="age-days"></span>
                    </div>
                </div>
            `;
        }

        function calculateAge() {
            const dob = new Date(document.getElementById('age-dob').value);
            const today = new Date();
            
            const ageMs = today - dob;
            const ageDays = Math.floor(ageMs / (1000 * 60 * 60 * 24));
            const ageMonths = Math.floor(ageDays / 30.44);
            const ageYears = Math.floor(ageMonths / 12);
            
            document.getElementById('age-years').textContent = ageYears;
            document.getElementById('age-months').textContent = ageMonths;
            document.getElementById('age-days').textContent = ageDays;
            document.getElementById('age-result').classList.add('show');
        }

        // Tip Calculator
        function getTipCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Bill Amount ($)</label>
                    <input type="number" id="tip-bill" value="100">
                </div>
                <div class="calc-input-group">
                    <label>Tip Percentage (%)</label>
                    <input type="number" id="tip-percent" value="15">
                </div>
                <div class="calc-input-group">
                    <label>Number of People</label>
                    <input type="number" id="tip-people" value="1">
                </div>
                <button class="calc-btn" onclick="calculateTip()">Calculate Tip</button>
                <div class="result-box" id="tip-result">
                    <h4>Bill Summary</h4>
                    <div class="result-item">
                        <span class="result-label">Tip Amount</span>
                        <span class="result-value" id="tip-amount"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Bill</span>
                        <span class="result-value" id="tip-total"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Per Person</span>
                        <span class="result-value" id="tip-per-person"></span>
                    </div>
                </div>
            `;
        }

        function calculateTip() {
            const bill = parseFloat(document.getElementById('tip-bill').value);
            const tipPercent = parseFloat(document.getElementById('tip-percent').value);
            const people = parseInt(document.getElementById('tip-people').value);
            
            const tipAmount = bill * (tipPercent / 100);
            const total = bill + tipAmount;
            const perPerson = total / people;
            
            document.getElementById('tip-amount').textContent = '$' + tipAmount.toFixed(2);
            document.getElementById('tip-total').textContent = '$' + total.toFixed(2);
            document.getElementById('tip-per-person').textContent = '$' + perPerson.toFixed(2);
            document.getElementById('tip-result').classList.add('show');
        }

        // Circle Calculator
        function getCircleCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Radius</label>
                    <input type="number" id="circle-radius" placeholder="5">
                </div>
                <button class="calc-btn" onclick="calculateCircle()">Calculate</button>
                <div class="result-box" id="circle-result">
                    <h4>Circle Properties</h4>
                    <div class="result-item">
                        <span class="result-label">Area</span>
                        <span class="result-value" id="circle-area"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Circumference</span>
                        <span class="result-value" id="circle-circumference"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Diameter</span>
                        <span class="result-value" id="circle-diameter"></span>
                    </div>
                </div>
            `;
        }

        function calculateCircle() {
            const radius = parseFloat(document.getElementById('circle-radius').value);
            
            const area = Math.PI * radius * radius;
            const circumference = 2 * Math.PI * radius;
            const diameter = 2 * radius;
            
            document.getElementById('circle-area').textContent = area.toFixed(2);
            document.getElementById('circle-circumference').textContent = circumference.toFixed(2);
            document.getElementById('circle-diameter').textContent = diameter.toFixed(2);
            document.getElementById('circle-result').classList.add('show');
        }

        // Pythagorean Calculator
        function getPythagoreanCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Side A</label>
                    <input type="number" id="pyth-a" placeholder="3">
                </div>
                <div class="calc-input-group">
                    <label>Side B</label>
                    <input type="number" id="pyth-b" placeholder="4">
                </div>
                <button class="calc-btn" onclick="calculatePythagorean()">Calculate Hypotenuse</button>
                <div class="result-box" id="pyth-result">
                    <h4>Result</h4>
                    <div class="result-item">
                        <span class="result-label">Hypotenuse (c)</span>
                        <span class="result-value" id="pyth-c"></span>
                    </div>
                </div>
            `;
        }

        function calculatePythagorean() {
            const a = parseFloat(document.getElementById('pyth-a').value);
            const b = parseFloat(document.getElementById('pyth-b').value);
            
            const c = Math.sqrt(a * a + b * b);
            
            document.getElementById('pyth-c').textContent = c.toFixed(2);
            document.getElementById('pyth-result').classList.add('show');
        }

        // Calorie Calculator
        function getCalorieCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Age</label>
                    <input type="number" id="cal-age" value="30">
                </div>
                <div class="calc-input-group">
                    <label>Gender</label>
                    <select id="cal-gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="calc-input-group">
                    <label>Height (cm)</label>
                    <input type="number" id="cal-height" value="170">
                </div>
                <div class="calc-input-group">
                    <label>Weight (kg)</label>
                    <input type="number" id="cal-weight" value="70">
                </div>
                <div class="calc-input-group">
                    <label>Activity Level</label>
                    <select id="cal-activity">
                        <option value="1.2">Sedentary</option>
                        <option value="1.375">Lightly Active</option>
                        <option value="1.55" selected>Moderately Active</option>
                        <option value="1.725">Very Active</option>
                        <option value="1.9">Extremely Active</option>
                    </select>
                </div>
                <button class="calc-btn" onclick="calculateCalories()">Calculate</button>
                <div class="result-box" id="cal-result">
                    <h4>Daily Calorie Needs</h4>
                    <div class="result-item">
                        <span class="result-label">Maintain Weight</span>
                        <span class="result-value" id="cal-maintain"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Lose Weight</span>
                        <span class="result-value" id="cal-lose"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Gain Weight</span>
                        <span class="result-value" id="cal-gain"></span>
                    </div>
                </div>
            `;
        }

        function calculateCalories() {
            const age = parseInt(document.getElementById('cal-age').value);
            const gender = document.getElementById('cal-gender').value;
            const height = parseFloat(document.getElementById('cal-height').value);
            const weight = parseFloat(document.getElementById('cal-weight').value);
            const activity = parseFloat(document.getElementById('cal-activity').value);
            
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            const maintain = Math.round(bmr * activity);
            const lose = Math.round(maintain - 500);
            const gain = Math.round(maintain + 500);
            
            document.getElementById('cal-maintain').textContent = maintain + ' cal/day';
            document.getElementById('cal-lose').textContent = lose + ' cal/day';
            document.getElementById('cal-gain').textContent = gain + ' cal/day';
            document.getElementById('cal-result').classList.add('show');
        }

        // Temperature Calculator
        function getTemperatureCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Temperature</label>
                    <input type="number" id="temp-value" value="0">
                </div>
                <div class="calc-input-group">
                    <label>From</label>
                    <select id="temp-from">
                        <option value="celsius">Celsius</option>
                        <option value="fahrenheit">Fahrenheit</option>
                        <option value="kelvin">Kelvin</option>
                    </select>
                </div>
                <button class="calc-btn" onclick="calculateTemperature()">Convert</button>
                <div class="result-box" id="temp-result">
                    <h4>Conversions</h4>
                    <div class="result-item">
                        <span class="result-label">Celsius</span>
                        <span class="result-value" id="temp-celsius"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Fahrenheit</span>
                        <span class="result-value" id="temp-fahrenheit"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Kelvin</span>
                        <span class="result-value" id="temp-kelvin"></span>
                    </div>
                </div>
            `;
        }

        function calculateTemperature() {
            const value = parseFloat(document.getElementById('temp-value').value);
            const from = document.getElementById('temp-from').value;
            
            let celsius, fahrenheit, kelvin;
            
            if (from === 'celsius') {
                celsius = value;
                fahrenheit = value * 9/5 + 32;
                kelvin = value + 273.15;
            } else if (from === 'fahrenheit') {
                celsius = (value - 32) * 5/9;
                fahrenheit = value;
                kelvin = celsius + 273.15;
            } else {
                celsius = value - 273.15;
                fahrenheit = celsius * 9/5 + 32;
                kelvin = value;
            }
            
            document.getElementById('temp-celsius').textContent = celsius.toFixed(2) + '¬∞C';
            document.getElementById('temp-fahrenheit').textContent = fahrenheit.toFixed(2) + '¬∞F';
            document.getElementById('temp-kelvin').textContent = kelvin.toFixed(2) + ' K';
            document.getElementById('temp-result').classList.add('show');
        }

        // Running Pace Calculator
        function getPaceCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Distance (km)</label>
                    <input type="number" id="pace-distance" value="10">
                </div>
                <div class="calc-input-group">
                    <label>Hours</label>
                    <input type="number" id="pace-hours" value="0">
                </div>
                <div class="calc-input-group">
                    <label>Minutes</label>
                    <input type="number" id="pace-minutes" value="50">
                </div>
                <div class="calc-input-group">
                    <label>Seconds</label>
                    <input type="number" id="pace-seconds" value="0">
                </div>
                <button class="calc-btn" onclick="calculatePace()">Calculate Pace</button>
                <div class="result-box" id="pace-result">
                    <h4>Running Pace</h4>
                    <div class="result-item">
                        <span class="result-label">Pace per km</span>
                        <span class="result-value" id="pace-per-km"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Speed (km/h)</span>
                        <span class="result-value" id="pace-speed"></span>
                    </div>
                </div>
            `;
        }

        function calculatePace() {
            const distance = parseFloat(document.getElementById('pace-distance').value);
            const hours = parseInt(document.getElementById('pace-hours').value) || 0;
            const minutes = parseInt(document.getElementById('pace-minutes').value) || 0;
            const seconds = parseInt(document.getElementById('pace-seconds').value) || 0;
            
            const totalMinutes = hours * 60 + minutes + seconds / 60;
            const paceMinutes = totalMinutes / distance;
            const speed = distance / (totalMinutes / 60);
            
            const paceMin = Math.floor(paceMinutes);
            const paceSec = Math.round((paceMinutes - paceMin) * 60);
            
            document.getElementById('pace-per-km').textContent = `${paceMin}:${paceSec.toString().padStart(2, '0')} /km`;
            document.getElementById('pace-speed').textContent = speed.toFixed(2) + ' km/h';
            document.getElementById('pace-result').classList.add('show');
        }

        // Dog Age Calculator
        function getDogAgeCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Dog's Age (years)</label>
                    <input type="number" id="dog-age" value="5">
                </div>
                <div class="calc-input-group">
                    <label>Dog Size</label>
                    <select id="dog-size">
                        <option value="small">Small (< 20 lbs)</option>
                        <option value="medium" selected>Medium (20-50 lbs)</option>
                        <option value="large">Large (> 50 lbs)</option>
                    </select>
                </div>
                <button class="calc-btn" onclick="calculateDogAge()">Calculate</button>
                <div class="result-box" id="dog-result">
                    <h4>Human Equivalent Age</h4>
                    <div class="result-item">
                        <span class="result-label">Human Years</span>
                        <span class="result-value" id="dog-human-age"></span>
                    </div>
                </div>
            `;
        }

        function calculateDogAge() {
            const age = parseInt(document.getElementById('dog-age').value);
            const size = document.getElementById('dog-size').value;
            
            let humanAge;
            
            // Simplified calculation
            if (age === 1) {
                humanAge = 15;
            } else if (age === 2) {
                humanAge = 24;
            } else {
                if (size === 'small') {
                    humanAge = 24 + (age - 2) * 4;
                } else if (size === 'medium') {
                    humanAge = 24 + (age - 2) * 5;
                } else {
                    humanAge = 24 + (age - 2) * 6;
                }
            }
            
            document.getElementById('dog-human-age').textContent = humanAge + ' years';
            document.getElementById('dog-result').classList.add('show');
        }

        // GPA Calculator
        function getGPACalculator() {
            return `
                <div id="gpa-courses">
                    <div class="calc-input-group">
                        <label>Grade 1</label>
                        <select class="gpa-grade">
                            <option value="4.0">A (4.0)</option>
                            <option value="3.7">A- (3.7)</option>
                            <option value="3.3">B+ (3.3)</option>
                            <option value="3.0">B (3.0)</option>
                            <option value="2.7">B- (2.7)</option>
                            <option value="2.3">C+ (2.3)</option>
                            <option value="2.0">C (2.0)</option>
                            <option value="1.7">C- (1.7)</option>
                            <option value="1.3">D+ (1.3)</option>
                            <option value="1.0">D (1.0)</option>
                            <option value="0.0">F (0.0)</option>
                        </select>
                    </div>
                </div>
                <button class="calc-btn" onclick="addGradeField()">+ Add Grade</button>
                <button class="calc-btn" onclick="calculateGPA()">Calculate GPA</button>
                <div class="result-box" id="gpa-result">
                    <h4>Your GPA</h4>
                    <div class="result-item">
                        <span class="result-label">GPA</span>
                        <span class="result-value" id="gpa-value"></span>
                    </div>
                </div>
            `;
        }

        let gradeCount = 1;

        function addGradeField() {
            gradeCount++;
            const container = document.getElementById('gpa-courses');
            const div = document.createElement('div');
            div.className = 'calc-input-group';
            div.innerHTML = `
                <label>Grade ${gradeCount}</label>
                <select class="gpa-grade">
                    <option value="4.0">A (4.0)</option>
                    <option value="3.7">A- (3.7)</option>
                    <option value="3.3">B+ (3.3)</option>
                    <option value="3.0">B (3.0)</option>
                    <option value="2.7">B- (2.7)</option>
                    <option value="2.3">C+ (2.3)</option>
                    <option value="2.0">C (2.0)</option>
                    <option value="1.7">C- (1.7)</option>
                    <option value="1.3">D+ (1.3)</option>
                    <option value="1.0">D (1.0)</option>
                    <option value="0.0">F (0.0)</option>
                </select>
            `;
            container.appendChild(div);
        }

        function calculateGPA() {
            const grades = document.querySelectorAll('.gpa-grade');
            let total = 0;
            
            grades.forEach(grade => {
                total += parseFloat(grade.value);
            });
            
            const gpa = (total / grades.length).toFixed(2);
            
            document.getElementById('gpa-value').textContent = gpa;
            document.getElementById('gpa-result').classList.add('show');
        }

        // Investment Calculator
        function getInvestmentCalculator() {
            return `
                <div class="calc-input-group">
                    <label>Initial Investment ($)</label>
                    <input type="number" id="invest-initial" value="5000">
                </div>
                <div class="calc-input-group">
                    <label>Monthly Contribution ($)</label>
                    <input type="number" id="invest-monthly" value="200">
                </div>
                <div class="calc-input-group">
                    <label>Annual Return (%)</label>
                    <input type="number" id="invest-rate" value="7" step="0.1">
                </div>
                <div class="calc-input-group">
                    <label>Years</label>
                    <input type="number" id="invest-years" value="10">
                </div>
                <button class="calc-btn" onclick="calculateInvestment()">Calculate</button>
                <div class="result-box" id="invest-result">
                    <h4>Investment Summary</h4>
                    <div class="result-item">
                        <span class="result-label">Future Value</span>
                        <span class="result-value" id="invest-future"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Contributions</span>
                        <span class="result-value" id="invest-contrib"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Earnings</span>
                        <span class="result-value" id="invest-earnings"></span>
                    </div>
                </div>
            `;
        }

        function calculateInvestment() {
            const initial = parseFloat(document.getElementById('invest-initial').value);
            const monthly = parseFloat(document.getElementById('invest-monthly').value);
            const rate = parseFloat(document.getElementById('invest-rate').value) / 100 / 12;
            const years = parseFloat(document.getElementById('invest-years').value);
            const months = years * 12;
            
            const futureValue = initial * Math.pow(1 + rate, months) + 
                                monthly * ((Math.pow(1 + rate, months) - 1) / rate);
            const totalContrib = initial + (monthly * months);
            const totalEarnings = futureValue - totalContrib;
            
            document.getElementById('invest-future').textContent = '$' + futureValue.toFixed(2);
            document.getElementById('invest-contrib').textContent = '$' + totalContrib.toFixed(2);
            document.getElementById('invest-earnings').textContent = '$' + totalEarnings.toFixed(2);
            document.getElementById('invest-result').classList.add('show');
        }

        // Time Calculator
        function getTimeCalculator() {
            return `
                <h3 style="margin-bottom: 20px;">Add Time</h3>
                <div class="calc-input-group">
                    <label>Hours</label>
                    <input type="number" id="time-hours1" value="2">
                </div>
                <div class="calc-input-group">
                    <label>Minutes</label>
                    <input type="number" id="time-minutes1" value="30">
                </div>
                <div style="text-align: center; margin: 15px 0; color: var(--accent-1); font-size: 1.5rem;">+</div>
                <div class="calc-input-group">
                    <label>Hours</label>
                    <input type="number" id="time-hours2" value="1">
                </div>
                <div class="calc-input-group">
                    <label>Minutes</label>
                    <input type="number" id="time-minutes2" value="45">
                </div>
                <button class="calc-btn" onclick="calculateTime()">Calculate</button>
                <div class="result-box" id="time-result">
                    <h4>Result</h4>
                    <div class="result-item">
                        <span class="result-label">Total Time</span>
                        <span class="result-value" id="time-total"></span>
                    </div>
                </div>
            `;
        }

        function calculateTime() {
            const hours1 = parseInt(document.getElementById('time-hours1').value) || 0;
            const minutes1 = parseInt(document.getElementById('time-minutes1').value) || 0;
            const hours2 = parseInt(document.getElementById('time-hours2').value) || 0;
            const minutes2 = parseInt(document.getElementById('time-minutes2').value) || 0;
            
            const totalMinutes = (hours1 * 60 + minutes1) + (hours2 * 60 + minutes2);
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            
            document.getElementById('time-total').textContent = `${hours}h ${minutes}m`;
            document.getElementById('time-result').classList.add('show');
        }

        // Date Calculator
        function getDateCalculator() {
            return `
                <div class="calc-input-group">
                    <label>From Date</label>
                    <input type="date" id="date-from">
                </div>
                <div class="calc-input-group">
                    <label>To Date</label>
                    <input type="date" id="date-to">
                </div>
                <button class="calc-btn" onclick="calculateDateDiff()">Calculate</button>
                <div class="result-box" id="date-result">
                    <h4>Time Difference</h4>
                    <div class="result-item">
                        <span class="result-label">Total Days</span>
                        <span class="result-value" id="date-days"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Weeks</span>
                        <span class="result-value" id="date-weeks"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Months</span>
                        <span class="result-value" id="date-months"></span>
                    </div>
                </div>
            `;
        }

        function calculateDateDiff() {
            const from = new Date(document.getElementById('date-from').value);
            const to = new Date(document.getElementById('date-to').value);
            
            const diffTime = Math.abs(to - from);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffWeeks = Math.floor(diffDays / 7);
            const diffMonths = Math.floor(diffDays / 30.44);
            
            document.getElementById('date-days').textContent = diffDays;
            document.getElementById('date-weeks').textContent = diffWeeks;
            document.getElementById('date-months').textContent = diffMonths;
            document.getElementById('date-result').classList.add('show');
        }

        // Currency Calculator
        function getCurrencyCalculator() {
            // Fetch live rates when calculator opens
            fetchExchangeRates();
            
            return `
                <div class="calc-input-group">
                    <label>Amount</label>
                    <input type="number" id="currency-amount" value="100" oninput="calculateCurrency()">
                </div>
                <div class="calc-input-group">
                    <label>From Currency</label>
                    <select id="currency-from" onchange="calculateCurrency()">
                        <option value="USD">üá∫üá∏ US Dollar (USD)</option>
                        <option value="EUR">üá™üá∫ Euro (EUR)</option>
                        <option value="GBP">üá¨üáß British Pound (GBP)</option>
                        <option value="JPY">üáØüáµ Japanese Yen (JPY)</option>
                        <option value="CNY">üá®üá≥ Chinese Yuan (CNY)</option>
                        <option value="INR">üáÆüá≥ Indian Rupee (INR)</option>
                        <option value="CAD">üá®üá¶ Canadian Dollar (CAD)</option>
                        <option value="AUD">üá¶üá∫ Australian Dollar (AUD)</option>
                        <option value="CHF">üá®üá≠ Swiss Franc (CHF)</option>
                        <option value="SEK">üá∏üá™ Swedish Krona (SEK)</option>
                        <option value="NZD">üá≥üáø New Zealand Dollar (NZD)</option>
                        <option value="KRW">üá∞üá∑ South Korean Won (KRW)</option>
                        <option value="SGD">üá∏üá¨ Singapore Dollar (SGD)</option>
                        <option value="HKD">üá≠üá∞ Hong Kong Dollar (HKD)</option>
                        <option value="NOK">üá≥üá¥ Norwegian Krone (NOK)</option>
                        <option value="MXN">üá≤üáΩ Mexican Peso (MXN)</option>
                        <option value="BRL">üáßüá∑ Brazilian Real (BRL)</option>
                        <option value="ZAR">üáøüá¶ South African Rand (ZAR)</option>
                        <option value="TRY">üáπüá∑ Turkish Lira (TRY)</option>
                        <option value="AED">üá¶üá™ UAE Dirham (AED)</option>
                    </select>
                </div>
                <div style="text-align: center; margin: 15px 0;">
                    <button onclick="swapCurrency()" style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-1), var(--accent-4)); border: none; cursor: pointer; font-size: 1.5rem; transition: transform 0.3s ease;" onmouseover="this.style.transform='rotate(180deg)'" onmouseout="this.style.transform='rotate(0deg)'">‚áÑ</button>
                </div>
                <div class="calc-input-group">
                    <label>To Currency</label>
                    <select id="currency-to" onchange="calculateCurrency()">
                        <option value="USD">üá∫üá∏ US Dollar (USD)</option>
                        <option value="EUR" selected>üá™üá∫ Euro (EUR)</option>
                        <option value="GBP">üá¨üáß British Pound (GBP)</option>
                        <option value="JPY">üáØüáµ Japanese Yen (JPY)</option>
                        <option value="CNY">üá®üá≥ Chinese Yuan (CNY)</option>
                        <option value="INR">üáÆüá≥ Indian Rupee (INR)</option>
                        <option value="CAD">üá®üá¶ Canadian Dollar (CAD)</option>
                        <option value="AUD">üá¶üá∫ Australian Dollar (AUD)</option>
                        <option value="CHF">üá®üá≠ Swiss Franc (CHF)</option>
                        <option value="SEK">üá∏üá™ Swedish Krona (SEK)</option>
                        <option value="NZD">üá≥üáø New Zealand Dollar (NZD)</option>
                        <option value="KRW">üá∞üá∑ South Korean Won (KRW)</option>
                        <option value="SGD">üá∏üá¨ Singapore Dollar (SGD)</option>
                        <option value="HKD">üá≠üá∞ Hong Kong Dollar (HKD)</option>
                        <option value="NOK">üá≥üá¥ Norwegian Krone (NOK)</option>
                        <option value="MXN">üá≤üáΩ Mexican Peso (MXN)</option>
                        <option value="BRL">üáßüá∑ Brazilian Real (BRL)</option>
                        <option value="ZAR">üáøüá¶ South African Rand (ZAR)</option>
                        <option value="TRY">üáπüá∑ Turkish Lira (TRY)</option>
                        <option value="AED">üá¶üá™ UAE Dirham (AED)</option>
                    </select>
                </div>
                <div style="text-align: center; margin: 15px 0;">
                    <button onclick="fetchExchangeRates(true)" class="calc-btn" style="padding: 10px 20px; width: auto; display: inline-block;">
                        üîÑ Refresh Rates
                    </button>
                </div>
                <div class="result-box show" id="currency-result">
                    <h4>Converted Amount</h4>
                    <div style="text-align: center; padding: 30px;">
                        <div style="font-size: 3rem; font-weight: 700; background: linear-gradient(135deg, var(--accent-1), var(--accent-4)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-family: 'JetBrains Mono', monospace;" id="currency-converted">0.00</div>
                        <div style="color: var(--text-secondary); margin-top: 10px;" id="currency-symbol"></div>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Exchange Rate</span>
                        <span class="result-value" id="currency-rate"></span>
                    </div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border); color: var(--text-secondary); font-size: 0.85rem; text-align: center;" id="currency-update-time">
                        üì° Fetching live rates...
                    </div>
                </div>
            `;
        }

        // Exchange rates - will be updated from API
        let exchangeRates = {
            'USD': 1.00,
            'EUR': 0.92,
            'GBP': 0.79,
            'JPY': 149.50,
            'CNY': 7.24,
            'INR': 83.12,
            'CAD': 1.36,
            'AUD': 1.52,
            'CHF': 0.88,
            'SEK': 10.87,
            'NZD': 1.67,
            'KRW': 1320.45,
            'SGD': 1.34,
            'HKD': 7.82,
            'NOK': 10.98,
            'MXN': 17.15,
            'BRL': 4.97,
            'ZAR': 18.65,
            'TRY': 32.15,
            'AED': 3.67
        };

        let lastFetchTime = null;

        // Configuration for API
        const API_CONFIG = {
            // Option 1: Use Frankfurter API (free, no key needed, reliable)
            provider: 'frankfurter',
            frankfurter: {
                url: 'https://api.frankfurter.app/latest?from=USD',
                needsKey: false
            },
            // Option 2: To use Oanda, you need an API key
            // Get free API key from: https://www.oanda.com/us-en/trading/api/
            oanda: {
                url: 'https://api.oanda.com/v2/rates/latest.json',
                needsKey: true,
                apiKey: '', // ADD YOUR OANDA API KEY HERE
                accountId: '' // ADD YOUR OANDA ACCOUNT ID HERE
            },
            // Option 3: ExchangeRate-API (backup)
            exchangerate: {
                url: 'https://api.exchangerate-api.com/v4/latest/USD',
                needsKey: false
            }
        };

        // Fetch live exchange rates from API
        async function fetchExchangeRates(forceRefresh = false) {
            const updateTimeElement = document.getElementById('currency-update-time');
            
            // Check if we need to fetch (once per day or force refresh)
            const now = new Date();
            const today = now.toDateString();
            const cachedDate = localStorage.getItem('exchangeRatesDate');
            const cachedRates = localStorage.getItem('exchangeRates');
            
            // Use cached rates if available and not forcing refresh
            if (!forceRefresh && cachedDate === today && cachedRates) {
                exchangeRates = JSON.parse(cachedRates);
                lastFetchTime = new Date(localStorage.getItem('lastFetchTime'));
                if (updateTimeElement) {
                    updateTimeElement.innerHTML = `‚úÖ Live rates updated ${lastFetchTime.toLocaleTimeString()} (${localStorage.getItem('apiProvider') || 'cached'})`;
                }
                calculateCurrency();
                return;
            }

            if (updateTimeElement) {
                updateTimeElement.innerHTML = `üì° Fetching live rates...`;
            }

            try {
                let data;
                let provider = API_CONFIG.provider;
                
                // Fetch from selected provider
                if (provider === 'oanda' && API_CONFIG.oanda.apiKey) {
                    // Oanda API with authentication
                    const response = await fetch(API_CONFIG.oanda.url, {
                        headers: {
                            'Authorization': `Bearer ${API_CONFIG.oanda.apiKey}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (!response.ok) throw new Error('Oanda API request failed');
                    data = await response.json();
                    
                    // Parse Oanda response format
                    const quotes = data.quotes;
                    exchangeRates = {
                        'USD': 1.00,
                        'EUR': quotes.find(q => q.instrument === 'EUR_USD')?.midpoint || 0.92,
                        'GBP': quotes.find(q => q.instrument === 'GBP_USD')?.midpoint || 0.79,
                        'JPY': 1 / (quotes.find(q => q.instrument === 'USD_JPY')?.midpoint || 0.0067),
                        'CNY': 1 / (quotes.find(q => q.instrument === 'USD_CNY')?.midpoint || 0.138),
                        'INR': 1 / (quotes.find(q => q.instrument === 'USD_INR')?.midpoint || 0.012),
                        'CAD': 1 / (quotes.find(q => q.instrument === 'USD_CAD')?.midpoint || 0.735),
                        'AUD': quotes.find(q => q.instrument === 'AUD_USD')?.midpoint || 0.66,
                        'CHF': 1 / (quotes.find(q => q.instrument === 'USD_CHF')?.midpoint || 1.14),
                        'SEK': 1 / (quotes.find(q => q.instrument === 'USD_SEK')?.midpoint || 0.092),
                        'NZD': quotes.find(q => q.instrument === 'NZD_USD')?.midpoint || 0.60,
                        'KRW': 1 / (quotes.find(q => q.instrument === 'USD_KRW')?.midpoint || 0.00076),
                        'SGD': 1 / (quotes.find(q => q.instrument === 'USD_SGD')?.midpoint || 0.75),
                        'HKD': 1 / (quotes.find(q => q.instrument === 'USD_HKD')?.midpoint || 0.128),
                        'NOK': 1 / (quotes.find(q => q.instrument === 'USD_NOK')?.midpoint || 0.091),
                        'MXN': 1 / (quotes.find(q => q.instrument === 'USD_MXN')?.midpoint || 0.058),
                        'BRL': 1 / (quotes.find(q => q.instrument === 'USD_BRL')?.midpoint || 0.20),
                        'ZAR': 1 / (quotes.find(q => q.instrument === 'USD_ZAR')?.midpoint || 0.054),
                        'TRY': 1 / (quotes.find(q => q.instrument === 'USD_TRY')?.midpoint || 0.031),
                        'AED': 1 / (quotes.find(q => q.instrument === 'USD_AED')?.midpoint || 0.272)
                    };
                    
                } else if (provider === 'frankfurter') {
                    // Frankfurter API (free, reliable, EU-based)
                    const response = await fetch(API_CONFIG.frankfurter.url);
                    if (!response.ok) throw new Error('Frankfurter API request failed');
                    data = await response.json();
                    
                    exchangeRates = {
                        'USD': 1.00,
                        'EUR': data.rates.EUR || 0.92,
                        'GBP': data.rates.GBP || 0.79,
                        'JPY': data.rates.JPY || 149.50,
                        'CNY': data.rates.CNY || 7.24,
                        'INR': data.rates.INR || 83.12,
                        'CAD': data.rates.CAD || 1.36,
                        'AUD': data.rates.AUD || 1.52,
                        'CHF': data.rates.CHF || 0.88,
                        'SEK': data.rates.SEK || 10.87,
                        'NZD': data.rates.NZD || 1.67,
                        'KRW': data.rates.KRW || 1320.45,
                        'SGD': data.rates.SGD || 1.34,
                        'HKD': data.rates.HKD || 7.82,
                        'NOK': data.rates.NOK || 10.98,
                        'MXN': data.rates.MXN || 17.15,
                        'BRL': data.rates.BRL || 4.97,
                        'ZAR': data.rates.ZAR || 18.65,
                        'TRY': data.rates.TRY || 32.15,
                        'AED': data.rates.AED || 3.67
                    };
                    
                } else {
                    // Default: ExchangeRate-API
                    const response = await fetch(API_CONFIG.exchangerate.url);
                    if (!response.ok) throw new Error('ExchangeRate API request failed');
                    data = await response.json();
                    
                    exchangeRates = {
                        'USD': 1.00,
                        'EUR': data.rates.EUR || 0.92,
                        'GBP': data.rates.GBP || 0.79,
                        'JPY': data.rates.JPY || 149.50,
                        'CNY': data.rates.CNY || 7.24,
                        'INR': data.rates.INR || 83.12,
                        'CAD': data.rates.CAD || 1.36,
                        'AUD': data.rates.AUD || 1.52,
                        'CHF': data.rates.CHF || 0.88,
                        'SEK': data.rates.SEK || 10.87,
                        'NZD': data.rates.NZD || 1.67,
                        'KRW': data.rates.KRW || 1320.45,
                        'SGD': data.rates.SGD || 1.34,
                        'HKD': data.rates.HKD || 7.82,
                        'NOK': data.rates.NOK || 10.98,
                        'MXN': data.rates.MXN || 17.15,
                        'BRL': data.rates.BRL || 4.97,
                        'ZAR': data.rates.ZAR || 18.65,
                        'TRY': data.rates.TRY || 32.15,
                        'AED': data.rates.AED || 3.67
                    };
                }
                
                // Cache rates in localStorage
                localStorage.setItem('exchangeRates', JSON.stringify(exchangeRates));
                localStorage.setItem('exchangeRatesDate', today);
                localStorage.setItem('lastFetchTime', now.toISOString());
                localStorage.setItem('apiProvider', provider);
                
                lastFetchTime = now;
                
                if (updateTimeElement) {
                    updateTimeElement.innerHTML = `‚úÖ Live rates from ${provider.toUpperCase()} (${now.toLocaleTimeString()})`;
                }
                
                calculateCurrency();
                
            } catch (error) {
                console.error('Error fetching exchange rates:', error);
                if (updateTimeElement) {
                    updateTimeElement.innerHTML = `‚ö†Ô∏è Using cached rates (API error: ${error.message})`;
                }
            }
        }

        // Auto-fetch rates on page load (once per day)
        window.addEventListener('load', () => {
            const today = new Date().toDateString();
            const cachedDate = localStorage.getItem('exchangeRatesDate');
            
            if (cachedDate !== today) {
                fetchExchangeRates();
            }
        });

        const currencySymbols = {
            'USD': '$', 'EUR': '‚Ç¨', 'GBP': '¬£', 'JPY': '¬•',
            'CNY': '¬•', 'INR': '‚Çπ', 'CAD': 'C$', 'AUD': 'A$',
            'CHF': 'CHF', 'SEK': 'kr', 'NZD': 'NZ$', 'KRW': '‚Ç©',
            'SGD': 'S$', 'HKD': 'HK$', 'NOK': 'kr', 'MXN': '$',
            'BRL': 'R$', 'ZAR': 'R', 'TRY': '‚Ç∫', 'AED': 'ÿØ.ÿ•'
        };

        function calculateCurrency() {
            const amount = parseFloat(document.getElementById('currency-amount').value) || 0;
            const fromCurrency = document.getElementById('currency-from').value;
            const toCurrency = document.getElementById('currency-to').value;
            
            // Convert to USD first, then to target currency
            const amountInUSD = amount / exchangeRates[fromCurrency];
            const convertedAmount = amountInUSD * exchangeRates[toCurrency];
            
            // Calculate exchange rate
            const rate = exchangeRates[toCurrency] / exchangeRates[fromCurrency];
            
            document.getElementById('currency-converted').textContent = convertedAmount.toFixed(2);
            document.getElementById('currency-symbol').textContent = currencySymbols[toCurrency] + ' ' + toCurrency;
            document.getElementById('currency-rate').textContent = '1 ' + fromCurrency + ' = ' + rate.toFixed(4) + ' ' + toCurrency;
        }

        function swapCurrency() {
            const fromSelect = document.getElementById('currency-from');
            const toSelect = document.getElementById('currency-to');
            
            const fromValue = fromSelect.value;
            const toValue = toSelect.value;
            
            fromSelect.value = toValue;
            toSelect.value = fromValue;
            
            calculateCurrency();
        }

        // Initial render
        renderCalculators();

        // Add some interactivity to the page
        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX / window.innerWidth;
            const mouseY = e.clientY / window.innerHeight;
            
            document.body.style.setProperty('--mouse-x', mouseX);
            document.body.style.setProperty('--mouse-y', mouseY);
        });
    </script>
</body>
</html>
